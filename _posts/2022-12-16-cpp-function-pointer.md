---
title: "[C++] ν•¨μ ν¬μΈν„°(Function Pointer)"
excerpt: "ν•¨μ ν¬μΈν„°μ— λ€ν•΄ μ•μ•„λ³΄κΈ°"

categories:
  - C/C++
tags:
  - [C/C++, C++, Visual Studio, function, callback, pointer, function pointer]

permalink: /cpp/function-pointer/

toc: true
toc_sticky: true

date: 2022-12-16 18:17:47+0900
last_modified_at: 2022-12-16 18:17:51+0900
---

## π‘» ν•¨μ ν¬μΈν„°
**ν•¨μ ν¬μΈν„°(Function Pointer)**λ” **ν•¨μλ¥Ό λ°μ΄ν„° νƒ€μ…μΌλ΅ κ°€μ§€λ” ν¬μΈν„°**λ¥Ό μλ―Έν•λ‹¤. μ΄μ „ μ‹κ°„μ— λ°°μ› λ ν¬μΈν„°λ” μΌλ°μ μΈ λ³€μμ μ£Όμ†κ°’μ„ λ‹΄κ³  μμ—λ‹¤. ν•¨μ ν¬μΈν„°λ” ν•¨μμ μ‹μ‘ μ£Όμ†λ¥Ό λ‹΄μΌλ©°, ν•¨μμ μ΄λ¦„μ€ ν•¨μμ μ‹μ‘ μ£Όμ†λ¥Ό μλ―Έν•λ‹¤.(λ°°μ—΄κ³Ό μ μ‚¬ν•λ‹¤.)

```c++
int Add(int a, int b)
{
    return a + b;
}

int Sub(int a, int b)
{
    return a - b;
}
```

λ‹¤μκ³Ό κ°™μ΄ λ§μ…κ³Ό λΊ„μ…μ κΈ°λ¥μ„ κ°€μ§€λ” λ‘ ν•¨μκ°€ μλ‹¤κ³  κ°€μ •ν•΄λ³΄μ. λ‘ ν•¨μ λ¨λ‘ λ‘ κ°μ int νƒ€μ… μΈμλ¥Ό λ°›κ³  intλ¥Ό λ°ν™ν•λ‹¤. ν•¨μ ν¬μΈν„° μ„ μ–Έμ€ λ‹¤μκ³Ό κ°™λ‹¤.

```c++
[λ°ν™ νƒ€μ…](ν•¨μ ν¬μΈν„° μ΄λ¦„)(μΈμ)
```

λ³΄ν†µμ€ κΈΈκΈ° λ•λ¬Έμ— ``` typedef ```λ¥Ό μ΄μ©ν•μ—¬ μ΄λ¦„μ„ λ”°λ΅ μ§€μ •ν•΄μ¤„ μ μλ‹¤.

```c++
typedef [λ°ν™ νƒ€μ…](ν•¨μ ν¬μΈν„° μ΄λ¦„)(μΈμ);
```

μ„μ λ‘ ν•¨μλ¥Ό κ°€λ¦¬ν‚¤λ” ν¬μΈν„°λ” λ‹¤μκ³Ό κ°™μ΄ μ„ μ–Έ λ° μ‚¬μ©ν•  μ μλ‹¤.

```c++
// typedef μ§€μ •
typedef int(FUNC_TYPE)(int, int);

FUNC_TYPE* fn;
fn = Add;

int result = fn(1, 2);
// ν•¨μ ν¬μΈν„°λ” *(μ ‘κ·Ό μ—°μ‚°μ)κ°€ λ¶™μ–΄λ„ ν•¨μ μ£Όμ†λ¥Ό κ°€λ¦¬ν‚¤λ” κ²ƒμ€ λ‘κ°™λ‹¤.
int result2 = (*fn)(1, 2);

// typedef λ―Έμ§€μ •
int(*fn2)(int, int) = Add;
int result3 = fn2(3, 5);
```

***

### π± μ‚¬μ©ν•λ” μ΄μ 
> **μ—¬λ¬ μ¤„μ μ½”λ“λ¥Ό ν• λ²μ— κ΄€λ¦¬ν•  μ μλ‹¤.**

μ„μ μ½”λ“μ™€ κ°™μ΄ ν•¨μλ¥Ό μ¤‘λ³µ νΈμ¶ν•λ” μ½”λ“κ°€ μμ„ λ•, ``` Add ``` ν•¨μλ¥Ό μ‚¬μ©ν•λ‹¤ ``` Sub ``` ν•¨μλ΅ λ³€κ²½ν•λ ¤λ©΄ μ—¬λ¬ μ¤„μ μ½”λ“λ¥Ό μΌμΌμ΄ μμ •ν•΄μ•Όν•λ‹¤λ” λ¬Έμ μ μ΄ μλ‹¤. ν•¨μ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ©΄ ν¬μΈν„°λ¥Ό μ§€μ •ν• ν• μ¤„λ§ λ³€κ²½ν•¨μΌλ΅μ¨ μ—¬λ¬ μ¤„μ μ½”λ“λ¥Ό ν• λ²μ— λ³€κ²½ν•  μ μλ‹¤.

λν•, μ—¬λ¬ κ°μ μ΅°κ±΄μ„ ν†µν•΄ κ²€μƒ‰ν•λ‹¤λ” κ°€μ •ν•μ— κ²€μƒ‰ν•λ” ν•¨μλ¥Ό λ§λ“¤ λ•, μ›λλΌλ©΄ μ΅°κ±΄λ€λ΅ ν•¨μλ¥Ό μ¤‘λ³µ μƒμ„±ν•΄μ•Ό ν•μ§€λ§ ν•¨μ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•λ©΄ ν•΄λ‹Ή μΈμλ¥Ό λ°›λ” ν•¨μ ν•λ‚λ΅ μ—¬λ¬ κ°μ μ΅°κ±΄λ¬Έμ„ ν¬ν•¨ν• ν•¨μλ¥Ό λ§λ“¤ μ μκ² λλ‹¤.

```c++
typedef bool(ITEM_SELECTOR)(Item*, int);
// ITEM_SELECTOR* selector == bool(*selector)(Item*)
Item* FindItem(Item items[], int itemCount, ITEM_SELECTOR* selector, int value)
{
    for (int i = 0; i < itemCount; i++)
    {
        Item* item = &items[i];
        // TODO λ™μ‘
        if (selector(item, value))
            return item;
    }

    return nullptr;
}

bool IsRareItem(Item* item, int value)
{
    return item->_rarity >= value;
}

bool IsOwnerItem(Item* item, int ownerId)
{
    return item->_ownerId == ownerId;
}
```

***

### π± λ©¤λ²„ ν•¨μ ν¬μΈν„°
μ„μ ν•¨μ ν¬μΈν„° μ„ μ–Έ λ°©μ‹μ€ μΌλ° ν•¨μ(μ „μ—­ ν•¨μ, μ •μ  ν•¨μ)μ—λ§ ν•΄λ‹Ήλλ‹¤. **λ©¤λ²„ ν•¨μ ν¬μΈν„°** μ„ μ–Έ λ°©λ²•μ— λ€ν•΄ μ•μ•„λ³΄μ.

```c++
class Knight
{
public:
    // μ •μ  ν•¨μ
    static void HelloKnight()
    {
        cout << "HelloKnight()" << endl;
    }

    // λ©¤λ²„ ν•¨μ
    int GetHp()
    {
        cout << "GetHp()" << endl;
        return _hp;
    }
public:
    int _hp = 100;
};
```

μ„μ™€ κ°™μ΄ ``` Knight ``` ν΄λμ¤κ°€ μλ‹¤κ³  κ°€μ •ν•μ. μ •μ  ν•¨μμΈ ``` HelloKnight ```λ” μΌλ° ν•¨μ ν¬μΈν„° μ„ μ–Έ λ°©λ²•μΌλ΅ μ‚¬μ©ν•  μ μμ§€λ§ λ©¤λ²„ ν•¨μμΈ ``` GetHp ```λ” μ‚¬μ©ν•  μ μ—†λ‹¤. μ΄λ¬ν• λ©¤λ²„ ν•¨μ ν¬μΈν„°μ μ„ μ–Έ λ° μ‚¬μ© λ°©λ²•μ€ λ‹¤μκ³Ό κ°™λ‹¤.

```c++
// μ„ μ–Έ
typedef int(Knight::*PMEMFUNC)();
PMEMFUNC mfn;
mfn = &Knight::GetHp;

int(Kngiht::*mfn2)() = &Knight::GetHp;

// μ‚¬μ©
Knight k1;
(k1.*mfn)();

Knight* k2 = new Knight();
// κ°™μ€ μλ―Έ
((*k2).*mfn)();
(k2->*mfn)();
delete k2;
```

> - μΌλ° ν•¨μ ν¬μΈν„°λ” ``` & ```λ¥Ό μƒλµν•  μ μμ§€λ§ λ©¤λ²„ ν•¨μ ν¬μΈν„°μ κ²½μ°, ``` & ```λ¥Ό λ°λ“μ‹ λ¶™μ—¬μ¤μ•Όν•λ‹¤. κ³ λ΅ μ›¬λ§ν•λ©΄ λ¨λ‘ ``` & ```λ¥Ό λ¶™μ΄λ” κ² μΆ‹λ‹¤.
- νΉμ—¬λ‚ ν•¨μ ν¬μΈν„°μ™€ κ°™μ€ μ΄λ¦„μ λ©¤λ²„ λ³€μλ‚ λ©¤λ²„ ν•¨μκ°€ μ΅΄μ¬ν•  μ μκΈ° λ•λ¬Έμ— κ·Έλ¬ν• μ¤‘λ³µ λ¬Έμ λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄ λ©¤λ²„ ν•¨μ ν¬μΈν„°μ μ•μ—” μ ‘κ·Ό μ—°μ‚°μ ``` * ```μ„ λ¶™μΈλ‹¤.

***

## π‘» κΈ€μ„ λ§μΉλ©°
μ΄λ² μ‹κ°„μ—λ” ν•¨μ ν¬μΈν„°μ— λ€ν•΄ μ•μ•„λ³΄μ•λ‹¤. μΌλ° ν¬μΈν„°λ§ μ•κ³  μμ—λ”λ° μ΄λ² μ‹κ°„μ— μ²μ μ•μ•„λ³΄λ” ννΈμ€λ‹¤. ν•μ§€λ§ νƒ€μ…λ§ ν•¨μ νƒ€μ…μΌ λΏ λ‚λ¨Έμ§€λ” λ¨λ‘ λ™μΌν•κ² λ™μ‘ν•΄μ„ ν¬κ² μ–΄λ µμ§€ μ•μ•λ‹¤. ~~μ•½κ°„μ C++ νΉμ μ κ΄΄λ„ν• λ¬Έλ²•μ΄ λμ— μµμ§€ μ•μ„λΏ..~~ ν•¨μ ν¬μΈν„°κ°€ μ–Όλ§λ‚ μμ£Ό μ“°μΌμ§€λ” μ•„μ§κΉμ§„ κ°€λ μ΄ λμ§„ μ•μ§€λ§ μµν€λ‘λ©΄ λ°λ“μ‹ μ μ©ν•κ² μ“Έ κ³³μ΄ μμ„ κ²ƒ κ°™λ‹¤.

***

_[μ†μ¤μ½”λ“ λ³΄λ¬κ°€κΈ°](https://github.com/choi-dan-di/study_cpp/tree/main/callback-function/function-pointer)_

***

_μ¶μ²_   
_[μΈν”„λ° Rookiesλ‹ κ°•μ](https://inf.run/bje8)_   