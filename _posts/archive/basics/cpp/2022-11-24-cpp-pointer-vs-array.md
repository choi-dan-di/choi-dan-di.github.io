---
title: "[C++] λ‹¤μ¤‘ ν¬μΈν„° vs μ΄μ°¨μ› λ°°μ—΄"
excerpt: "λ‹¤μ¤‘ ν¬μΈν„°μ™€ μ΄μ°¨μ› λ°°μ—΄ λΉ„κµμ™€ ν¬μΈν„° μ‚¬μ© μ‹ μ£Όμμ‚¬ν•­μ— λ€ν•΄ μ•μ•„λ³΄κΈ°"

categories:
  - C/C++
tags:
  - [C/C++, C++, Visual Studio, pointer, multiple array, array, multiple pointer, pointer, memory]

permalink: /cpp/pointer-vs-array/

toc: true
toc_sticky: true

date: 2022-11-24 17:02:11+0900
last_modified_at: 2022-11-24 17:02:15+0900
---

## π‘» λ“¤μ–΄κ°€κΈ°μ— μ•μ„
μ§€λ‚ μ‹κ°„μ— λ°°μ—΄μ„ κ³µλ¶€ν•λ©° ν¬μΈν„°μ™€ λ°°μ—΄μ μ°¨μ΄μ μ— λ€ν•΄ μ μ‹ μ•μ•„λ³΄μ•λ‹¤. μ–Έλ»λ³΄λ©΄ ν¬μΈν„°μ™€ λ°°μ—΄μ΄ κ°™μ€ κΈ°λ¥μ„ ν•λ” λ¬Έλ²•μ΄λΌ μƒκ°λκ² μ§€λ§ μ΄ λ‘μ€ μ—„μ—°ν λ‹¤λ¥Έ μ΅΄μ¬λΌκ³ λ„ λ§ν–μ—λ‹¤. μ΄λ² μ‹κ°„μ—λ” λ‹¤μ¤‘ ν¬μΈν„°μ™€ μ΄μ°¨μ› λ°°μ—΄μ„ λΉ„κµν•΄λ³΄λ©° μ–΄λ–»κ² λ‹¤λ¥Έμ§€ λ‹¤μ‹ ν• λ² λ” μ •λ¦¬ν•΄λ³΄κ³ , ν¬μΈν„°, μ°Έμ΅° λ“±μ„ μ‚¬μ©ν•  λ•μ μ£Όμμ‚¬ν•­μ— λ€ν•΄ μ•μ•„λ³΄μ.

***

## π‘» ν¬μΈν„° vs λ°°μ—΄
λ‹¨μΌ ν¬μΈν„°μ™€ μΌμ°¨μ› λ°°μ—΄μ€ κ°™μ€ κΈ°λ¥μ„ ν•λ‹¤κ³  ν–μ—λ‹¤. λ°°μ—΄μ„ ν•¨μμ μΈμ(λ§¤κ° λ³€μ)λ΅ λ„κ²¨μ¤„ λ•λ” ν¬μΈν„° ν•μ‹μΌλ΅ λ³€ν™λμ–΄ λ„μ–΄κ°€λ” κ²ƒλ„ ν™•μΈν–μ—λ‹¤. κ·Έλμ„ **λ°°μ—΄μ μ΄λ¦„**μ€ λ°°μ—΄μ μ‹μ‘ μ£Όμ†κ°’μ„ κ°€λ¦¬ν‚¤λ” **TYPE* ν¬μΈν„°**λ΅ λ³€ν™μ΄ κ°€λ¥ν•λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.

- **TYPEν• 1μ°¨μ› λ°°μ—΄**κ³Ό **TYPE*ν• ν¬μΈν„°**λ” μ™„μ „ν νΈν™μ΄ λλ‹¤.

```c++
int* p;
int arr[10] = { 1, 2, 3, 4, 5, 6, 7, 8 };

p = arr;

cout << p[0] << endl; // 1
cout << arr[0] << endl; // 1

cout << *p << endl; // 1
cout << *arr << endl; // 1

cout << *(p + 3) << endl; // 4
cout << *(arr + 3) << endl; // 4
```

μ΄λ¬ν• μ λ§ λ³΄λ©΄ ν¬μΈν„°μ™€ λ°°μ—΄μ΄ κ°™μ•„λ³΄μ΄μ§€λ§ λ‘μ€ λ‹¤λ¥΄λ‹¤. λ‹¤μ¤‘ ν¬μΈν„°μ™€ μ΄μ°¨μ› λ°°μ—΄μ„ λΉ„κµν•΄λ³΄λ©΄μ„ λ‘μ μ°¨μ΄μ μ„ ν™•μ‹¤ν μ•μ•„λ³΄μ.

***

### π± λ‹¤μ¤‘ ν¬μΈν„° vs μ΄μ°¨μ› λ°°μ—΄

μ—¬κΈ° μ΄μ°¨μ› λ°°μ—΄κ³Ό μ΄μ¤‘ ν¬μΈν„°κ°€ μλ‹¤.

```c++
int arr2[2][2] = { { 1, 2 }, { 3, 4 } };

int** pp = arr2;  // νΈν™ λ¶κ°€
```

λ‹¤μ¤‘ ν¬μΈν„°μ™€ μ΄μ°¨μ› λ°°μ—΄μ€ νΈν™μ΄ **λ¶κ°€λ¥**ν•λ‹¤. ``` int** pp = (int**)arr2; ```λ΅ ν•λ³€ν™μ„ ν•λ©΄ κ°€λ¥ν•΄λ³΄μ΄μ§€λ§ μμ™Έκ°€ λ°μƒν•λ©° μ—¬μ „ν λ¶κ°€λ¥ν•λ‹¤. μ• λ‹Ήμ΄ νƒ€μ…μ΄ λ§μ§€ μ•μ•„ λ°μƒν•λ” λ¬Έμ μ΄λ‹¤. λ©”λ¨λ¦¬λ¥Ό ν™•μΈν•΄λ³΄μ.

![Alt Text](/assets/images/posts_img/basics/cpp/pointer/pointer-vs-array/memory.PNG)   

λ‹¤μμ€ ``` &pp ```μ κ°’, μ¦‰ **ppμ μ£Όμ†κ°’**μ΄λ‹¤. ν•΄λ‹Ή λ°”κµ¬λ‹μ—” ``` 0037fdd0 ```μ΄λΌλ” κ°’μ΄ λ“¤μ–΄μκ³  κ·Έ μ£Όμ†λ΅ λ„μ–΄κ°€λ©΄ **1**μ΄ λ‹΄κ²¨μλ” λ°°μ—΄ ``` arr ```μ„ κ°€λ¦¬ν‚¤κ³  μλ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.

ppλ” μ΄μ¤‘ ν¬μΈν„°μ΄λ―€λ΅ μ£Όμ†λ¥Ό νƒ€κ³  νƒ€κ³  κ°„ κ³³μ—λ„ **μ£Όμ†**κ°€ μμ–΄μ•Ό ν•λ‹¤κ³  λ§ν•κ³  μμ§€λ§, μ •μ‘ λ‚΄μ©μ€ λ°°μ—΄μ κ°’μΈ **1**μ΄ λ‹΄κ²¨μμ–΄ μ λ€λ΅ λ©”λ¨λ¦¬λ¥Ό μ°Ύμ•„κ°€μ§€ λ» ν•κ² λλ” κ²ƒμ΄λ‹¤.

κ·Έλμ„ ν•΄λ‹Ή μ½”λ“λ” μ£Όμ†λ¥Ό νƒ€κ³  λ„μ–΄κ°„ κ³³μ— κ°’μ΄ μλ‹¤λ” κ²ƒμ„ μ•λ ¤μ¤μ•Ό ν•λ―€λ΅ λ‹¤μ¤‘ ν¬μΈν„°λ” μ‚¬μ©ν•  μ μ—†κ² λλ” κ²ƒμ΄λ‹¤.

```c++
int* pp = arr2;

// λ¬Όλ΅  λ°°μ—΄μ ν•λ³€ν™μ„ μ΄μ©ν•΄ μ‚¬μ©ν•  μ μλ‹¤.
// ν•μ§€λ§ λ°°μ—΄μ κ°’μ„ μΌμ°¨μ›μ μΌλ΅λ°–μ— κ°€μ Έμ¤μ§€ λ»ν•λ‹¤.
// int* pp = (int*)arr2;
```

μ£Όμ†λ¥Ό ν• λ²λ§ νƒ€κ³  λ„μ–΄κ°€λ‹ λ‹¨μΌ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ”λ° μ΄λ ‡κ² μ μΌλ©΄ μ—λ¬κ°€ λ‚λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤. μ—λ¬ λ©”μ„Έμ§€λ¥Ό ν™•μΈν•΄λ³΄μ.

![Alt Text](/assets/images/posts_img/basics/cpp/pointer/pointer-vs-array/error.PNG)   

```c++
int(*pp)[2] = arr2;
```

ν•΄λ‹Ή νƒ€μ…μΌλ΅ λ³€ν™ν•΄μ£Όλ‹ μ—λ¬κ°€ μ‚¬λΌμ΅λ‹¤. μ„μ μ½”λ“μ λ»μ€ λ‹¨μΌ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•  λ•μ™€ κ°™μ§€λ§, μ΄μ°¨μ› λ°°μ—΄μ΄λ―€λ΅ ν• λ°°μ—΄ μ•μ λ¨λ“  μΈλ±μ¤μ— μ ‘κ·Όν•κΈ° μ„ν•΄ λ°°μ—΄ ν‘μ‹λ¥Ό λ¶™μ—¬μ¤€ κ²ƒμ΄λ‹¤. μ΄λ ‡κ² μ½”λ“λ¥Ό μ κ²λλ©΄ λ‹¤μκ³Ό κ°™μ΄ λ°°μ—΄μ— μ ‘κ·Όμ΄ κ°€λ¥ν•λ‹¤.

```c++
cout << (*pp)[0] << endl; // 1
cout << (*pp)[1] << endl; // 2
cout << (*(pp + 1))[0] << endl; // 3
cout << (*(pp + 1))[1] << endl; // 4

cout << pp[0][0] << endl; // 1
cout << pp[0][1] << endl; // 2
cout << pp[1][0] << endl; // 3
cout << pp[1][1] << endl; // 4
```

ν•μ§€λ§ μ΄μ°¨μ› λ°°μ—΄μ— λ€ν•΄ ν¬μΈν„°λ΅ μ ‘κ·Όν•λ” κ²ƒμ€ μ μ‚¬μ©ν•λ” λ¶€λ¶„μ€ μ•„λ‹λ‹ μ°Έκ³ λ§ ν•΄λ‘λ„λ΅ ν•κ³ , ν¬μΈν„°μ— λ€ν• κ°λ…μ„ μ™„λ²½ν μµνκ³  λ°°μ—΄κ³Όμ μ°¨μ΄μ μ— λ€ν•΄μ„λ§ μ μ•κ³  μμΌλ©΄ λ  κ²ƒ κ°™λ‹¤.

***

## π‘» μ£Όμμ‚¬ν•­
μ΄μ  λ°μ΄ν„°μ— μ ‘κ·Όν•λ” λ°©λ²•μ„ μ•„μ£Ό λ‹¤μ–‘ν•κ² λ°°μ› λ‹¤. ν¬μΈν„°λ„ μκ³  μ°Έμ΅°λ„ μλ”λ°, μ΄μ  μ΄λ¥Ό ν™μ©ν•λ©΄ ν›¨μ”¬ νΈλ¦¬ν•κ² κ°λ°μ„ ν•  μ μμ„ κ²ƒ κ°™μ§€λ§ μƒκ°λ³΄λ‹¤ μ¤‘μ”ν•λ‹¤κ³  μ†κ°€λ½μ΄ μ•„ν”„λ„λ΅ κ³µλ¶€ν•΄μ™”μΌλ‹ λ§μ§€λ§‰μΌλ΅ μ‚¬μ© μ‹μ— μ£Όμν•΄μ•Ό ν•  μ‚¬ν•­λ“¤μ„ κ°„λ‹¨ν•κ² μ •λ¦¬ν•΄λ³΄μ.

- **ν•¨μ λ°ν™ νƒ€μ…μ— μ‚¬μ©ν•λ” κ²½μ°**

```c++
int& TestRef() {
    int a = 1;
    return a;
}

int* TestPointer() {
    int a = 1;
    return &a;
}
```

**κµ‰μ¥ν λ¬Έμ κ°€ λλ‹¤.**

μ΅°κΈμ΄λΌλ„ λ” κ°„νΈν•κ³  λ©”λ¨λ¦¬λ¥Ό λ μ‚¬μ©ν•κΈ° μ„ν•΄ λ°ν™κ°’μ„ μ°Έμ΅°ν•κ±°λ‚ ν¬μΈν„°λ΅ λ‚΄λ³΄λ‚΄λ” κ²½μ° μ•„μ£Ό μ„ν—ν•λ‹¤. μ„μ²λΌ ν•¨μλ¥Ό μ‘μ„±ν•κ³  ``` main ``` ν•¨μμ—μ„ ``` TestPointer(); ```λ¥Ό μ‚¬μ©ν•μ—¬ ν¬μΈν„°μ μ£Όμ†κ°’μ„ λ„κ²¨λ°›μ•λ‹¤κ³  κ°€μ •ν•΄λ³΄μ.

```c++
int main() {
  int* pointer = TestPointer();
}
```

**μ¤νƒ ν”„λ μ„**μ„ μƒκ°ν•΄λ³΄μ.

![Alt Text](/assets/images/posts_img/basics/cpp/pointer/pointer-vs-array/stack-frame.jpg)   

``` TestPointer ``` ν•¨μ μ¤νƒ ν”„λ μ„μ΄ μƒμ„±λλ©΄μ„ ν•΄λ‹Ή κ³µκ°„ λ‚΄μ— μ§€μ—­ λ³€μμΈ ``` a ```κ°€ ν• λ‹Ήλκ³ , κ·Έ aμ μ£Όμ†λ¥Ό ``` main ``` ν•¨μ μ¤νƒ ν”„λ μ„μ μ§€μ—­ λ³€μλ΅ κ°’μ„ μ „λ‹¬ν•΄μ£Όμ—λ‹¤. λ”± λ΄λ„ ν•λ©΄ μ• λ  κ²ƒ κ°™μ€ λ°©λ²•μ΄λ‹¤. 

μ‚¬μ‹¤ ``` TestPointer ``` ν•¨μλ” ``` a ```μ μ£Όμ†κ°’μ„ λ„κ²¨μ¤€ ν›„ ν•  μΌμ„ λ‹¤ ν–κΈ° λ•λ¬Έμ— μ¤νƒ ν”„λ μ„ ν• λ‹Ήμ€ ν•΄μ λλ‹¤. ν•μ§€λ§ κ°’μ€ κ·Έλ€λ΅ λ‚¨μ•„μκΈ° λ•λ¬Έμ— ``` *pointer ```μ κ°’μ„ λ°”κΎΌλ‹¤ ν•λ”λΌλ„ μ—λ¬λ” λ‚μ§€ μ•λ”λ‹¤. κ·Έλ¬λ‚ μ ν¨ λ²”μ„κ°€ μ•„λ‹κΈ° λ•λ¬Έμ— μ΄λ ‡κ² μ‚¬μ©λλ” λ©”λ¨λ¦¬λ” μ³μ€ κ°’μ΄ μ•„λ‹μ„ μ μ¶”ν•  μ μλ‹¤.

```c++
void TestWrong(int* ptr) {
  int a[100] = {};
  a[99] = 0xAAAAAAAA; // λ””λ²„κΉ… νΈν•κ² ν•κΈ° μ„ν•΄
  *ptr = 0x12341234;
}

int main() {
  TestWrong(pointer);
}
```

λ‹¤μμΌλ΅ ν¬μΈν„°λ¥Ό λ§¤κ° λ³€μλ΅ μ…λ ¥λ°›μ•„ ν•΄λ‹Ή μ£Όμ†κ°€ κ°€λ¦¬ν‚¤λ” κ°’μ„ λ³€κ²½ν•λ” ν•¨μκ°€ μλ‹¤κ³  κ°€μ •ν•΄λ³΄μ. μ΄λ―Έ μ΄μ „ λ‹¨κ³„μ—μ„ ``` pointer ```λ” μ ν¨ν•μ§€ μ•μ€ κ°’μ„ κ°€λ¦¬ν‚¤κ³  μλ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤. ``` TestPointer ```μ μ¤νƒ ν”„λ μ„μ΄ ν•΄μ λκ³  μ΄μ–΄μ„ λ°”λ΅ ``` TestWrong ``` ν•¨μμ μƒ μ¤νƒ ν”„λ μ„μ΄ μƒκΈ°κ² λκ³ , κ·Έ μ•μ—μ„ ν¬μΈν„°μ κ°’μ„ λ³€κ²½μ‹ν‚¤λ” μ½”λ“λ” μ–΄λ–»κ² λ κΉ?

``` *ptr = 0x12341234; ``` λ¶€λ¶„μ— λΈλ μ΄ν¬ ν¬μΈνΈλ¥Ό μ΅κ³  λ””λ²„κΉ…μ„ μ‹¤ν–‰μ‹ν‚¨ ν›„ λ©”λ¨λ¦¬μ— ``` &a[99] ``` λ¥Ό μ…λ ¥ν•΄ μ£Όμ†λ¥Ό μ°Ύμ•„κ°€λ³΄μ•λ‹¤.

![Alt Text](/assets/images/posts_img/basics/cpp/pointer/pointer-vs-array/error2.PNG)   

``` a[99] ```μ κ°’μ΄ ``` aaaaaaaa ```λ΅ μ λ“¤μ–΄κ°€ μλ” κ²ƒμ„ ν™•μΈν•  μ μκ³ , μ—¬κΈ°μ„ F10μ„ λλ¬ ν• μ¤„μ”© μ‹¤ν–‰μ‹ν‚¤λ©΄ λ°”λ΅ λ‹¤μ μ£Όμ†μ— ``` 12341234 ``` κ°’μ΄ λ“¤μ–΄κ°„ κ²ƒμ„ μ• μ μλ‹¤. κ·Έλ¦¬κ³  ν• λ² λ” F10μ„ λλ¬ ν• μ¤„μ„ μ‹¤ν–‰μ‹ν‚¤λ©΄ ν•¨μλ¥Ό λΉ μ Έλ‚μ¤λ” μκ°„ μμ™Έκ°€ λ°μƒν•κ²λλ‹¤. μ°Έκ³ λ΅ μ΄κ±΄ μ»΄νμΌλ¬κ°€ μ•μ•„μ„ λ²„κ·Έλ¥Ό μ΅μ•„μ£Όλ” λ¶€λ¶„μ—μ„ κ±Έλ¦° λ²„κ·Έμ΄κ³  κ²°λ΅ μ€ **μ ν¨ λ²”μ„λ¥Ό λ²—μ–΄λ‚ ν¬μΈν„°μ κ°’μ„ κ±΄λ“λ ¤μ„** λ‚λ” μ—λ¬μ΄λ‹¤.

ν•΄λ‹Ή μ£Όμ†κ°€ ν™μ„±ν™”λ μ¤νƒ ν”„λ μ„ λ‚΄μ— μλ”μ§€ μ•„λ‹μ§€, κ°’μ„ λ®μ–΄μ”μ°λ” κ³³μ— ebp, ret μ£Όμ†κ°™μ΄ μ¤‘μ”ν• μ •λ³΄κ°€ λ‹΄κ²¨μλ”μ§€, λ””λ²„κΉ… λ¨λ“μ—μ„ μ¤λ²„ν”λ΅μ° μ—¬λ¶€λ¥Ό νƒμ§€ν•κ³  μλ μ¥μ†μΈμ§€ λ¨λ‘ μ¤‘μ”ν• ν¬μΈνΈλ¥Ό μ΅κ² λλ”λ° μ΄λ ‡κ² μ ν¨ν•μ§€ μ•μ€ λ²”μ„μ— μλ” μ£Όμ†κ°’μ„ κ°€λ¦¬ν‚¤κ² λλ©΄ **λ©”λ¨λ¦¬ μ¤μ—Ό**μ΄ λλ” κ²ƒμ΄λ‹¤. κ·Έλ¬λ‹ ν¬μΈν„°λ¥Ό μ‚¬μ©ν•κ±°λ‚ μ°Έμ΅°λ¥Ό μ‚¬μ©ν•  λ• ν•­μƒ μ΅°μ‹¬ν•΄μ•Ό ν•λ‹¤.

***

## π‘» κΈ€μ„ λ§μΉλ©°
μ΄λ² μ‹κ°„μ—λ” ν¬μΈν„°λ¥Ό λ§λ¬΄λ¦¬ν•λ” μ‹κ°„μΌλ΅, λ‹¤μ¤‘ ν¬μΈν„°μ™€ μ΄μ°¨μ› λ°°μ—΄μ λΉ„κµ, κ·Έλ¦¬κ³  ν¬μΈν„° λ° μ°Έμ΅°λ¥Ό μλ» μ‚¬μ©ν–μ„ λ• λ‚νƒ€λ‚λ” λ©”λ¨λ¦¬ μ¤μ—Όμ— λ€ν•΄ μ•μ•„λ³΄μ•λ‹¤. κ³„μ† μ΄μ•ΌκΈ°ν•λ‹¤λ³΄λ‹ ν”„λ΅κ·Έλλ° μ‹μ—λ” λ©”λ¨λ¦¬ ν™μ©μ΄ κ°€μ¥ μ¤‘μ”ν• κ²ƒ κ°™μ΄ λκ»΄μ΅λ‹¤. λ©”λ¨λ¦¬μ μ ν¨ λ²”μ„μ μ¤‘μ”μ„±μ΄ 9ν• μ€ λκ³ , κ·Έ λ‹¤μμ€ μμν•κ² μ©λ‰μ„ μ°¨μ§€ν•λ” μ •λ„..? λΌκ³  λκ»΄μ΅λ‹¤. κ·Έλλ„ μ»΄νμΌλ¬κ°€ λ§¤λ² λ‚΄κ°€ μ§  μ½”λ“λ¥Ό λΉλ“ν•λ©΄μ„ μ²΄ν¬λ¥Ό ν•΄μ£Όλ‹ μ΄λ ‡κ² νΈν•μ§€ μ•μ„ μ μ—†λ‹¤. ν•μ§€λ§ μ¤μ—Όλ λ©”λ¨λ¦¬λ¥Ό κ±΄λ“λ” μκ°„ μ—λ¬κ°€ λ‚ μ§€ μ•λ‚ μ§€λ” λ¨λ¥΄λ” μΌμ΄κ³ , μ• λ‚λ©΄ ν›¨μ”¬ μ„ν—ν• κ²ƒμ΄λ‹ μ• μ΄μ— κ·Έλ΄ μΌμ΄ μ—†κ²λ” μ μΈμ§€ν•κ³  μ‚¬μ©ν•΄μ•Ό ν•  κ²ƒ κ°™λ‹¤.

***

_[μ†μ¤μ½”λ“ λ³΄λ¬κ°€κΈ°](https://github.com/choi-dan-di/study_cpp/tree/main/pointer/pointer-vs-array)_

***

_μ¶μ²_   
_[μΈν”„λ° Rookiesλ‹ κ°•μ](https://inf.run/bje8)_   