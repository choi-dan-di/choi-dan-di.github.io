---
title: "[C++] λ‹¤ν•μ„±(Polymorphism)"
excerpt: "κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ νΉμ§• μ¤‘ ν•λ‚μΈ λ‹¤ν•μ„±μ— λ€ν•΄ μ•μ•„λ³΄κΈ°"

categories:
  - C/C++
tags:
  - [C/C++, C++, Visual Studio, oop, polymorphism]

permalink: /cpp/polymorphism/

toc: true
toc_sticky: true

date: 2022-11-27 16:51:21+0900
last_modified_at: 2022-11-27 16:51:24+0900
---
 
## π‘» λ‹¤ν•μ„±
**λ‹¤ν•μ„±(Polymorphism)**μ΄λ€ κ°™μ€ μ΄λ¦„μ„ μ‚¬μ©ν•μ—¬ λ‹¤λ¥Έ κΈ°λ¥μ„ κµ¬ν„ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤. λ™λ…μ΄μΈ, λ™μμ΄μμ–΄μ— λΉ„μ ν•λ©΄ μ΄ν•΄κ°€ μ‰½λ‹¤. λ€ν‘μ μΌλ΅ **μ¤λ²„λ΅λ”©**κ³Ό **μ¤λ²„λΌμ΄λ”©**μ΄ μλ‹¤.

***

### π± μ¤λ²„λ΅λ”©(Overloading)
**μ¤λ²„λ΅λ”©(Overloading)**μ€ ν•¨μλ¥Ό **μ¤‘λ³µ μ •μ**ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤. μ΄μ „μ— ν•¨μλ¥Ό κµ¬ν„ν•  λ• μ΄λ¦„μ€ κ°™μ§€λ§ μΈμμ κ°μλ‚ νƒ€μ…μ„ λ‹¤λ¥΄κ² ν•΄μ„ λ§λ“  μ μ΄ μμ—λ‹¤. μ΄λ¬ν• λ¶€λ¶„μ΄ λ°”λ΅ ν•¨μ μ¤λ²„λ΅λ”©μ— ν•΄λ‹Ήλλ‹¤.

```c++
class Player
{
public:
    void Move() { cout << "Move Player !" << endl; }

    void Move(int a) { cout << "Move Player (int) !" << endl; }
public:
    int _hp;
};
```

ν΄λμ¤ λ‚΄λ¶€μ— ``` Move ``` ν•¨μλ¥Ό λ‘ λ² μ¤‘λ³µ μ •μ ν•μ€λ‹¤. ν•¨μκ°€ μ¤λ²„λ΅λ”© λ κ²ƒμ΄λ‹¤.

***

### π± μ¤λ²„λΌμ΄λ”©
**μ¤λ²„λΌμ΄λ”©(Overriding)**μ€ ν•¨μλ¥Ό **μ¬μ •μ**ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤. μƒμ†μ„±μ— λ€ν•΄ μ•μ•„λ³΄μ•μ„ λ• λ¶€λ¨ μμ‹ ν΄λμ¤ κ°„μ μƒμ†μ΄ μΌμ–΄λ‚κ²λκ³ , λ¶€λ¨μ λ©¤λ²„ ν•¨μλ¥Ό μμ‹μ λ©¤λ²„ ν•¨μλ΅ λ‹¤μ‹ λ§λ“  μ μ΄ μμ—λ‹¤. μ΄ λ¶€λ¶„μ΄ λ°”λ΅ ν•¨μ μ¤λ²„λΌμ΄λ”©μ— ν•΄λ‹Ήλλ‹¤.

```c++
class Player
{
public:
    void Move() { cout << "Move Player !" << endl; }
public:
    int _hp;
};

class Knight : public Player
{
public:
    void Move() { cout << "Move Knight !" << endl; }
public:
    int _stamina;
};
```

λ¶€λ¨ ν΄λμ¤μΈ ``` Player ```μ ``` Move ``` ν•¨μλ¥Ό μμ‹ ν΄λμ¤μΈ ``` Knight ``` μ—μ„ λ‹¤μ‹ ν• λ² λ” λ§λ“¦μΌλ΅μ¨ ν•¨μκ°€ μ¤λ²„λΌμ΄λ”© λμ—λ‹¤κ³  λ³Ό μ μλ‹¤.

***

### π± λ°”μΈλ”©
**λ°”μΈλ”©(Binding)**μ€ λ¬¶λ”λ‹¤λΌλ” λ»μ„ κ°€μ§„ λ‹¨μ–΄λ΅ ν”„λ΅κ·Έλλ°μ—μ„  **ν”„λ΅κ·Έλ¨μ— μ‚¬μ©λ κµ¬μ„± μ”μ†(κ°μΆ… κ°’λ“¤)κ°€ ν™•μ •λμ–΄ λ” μ΄μƒ λ³€κ²½ν•  μ μ—†λ” μƒνƒ**κ°€ λλ” κ²ƒμ„ μλ―Έν•λ‹¤. **μ •μ  λ°”μΈλ”©**κ³Ό **λ™μ  λ°”μΈλ”©**μ΄ μλ‹¤.

***

#### π μ •μ  λ°”μΈλ”©
**μ •μ  λ°”μΈλ”©(Static Binding)**μ€ **μ»΄νμΌ μ‹μ μ— κ²°μ •**λμ–΄ κ°’μ΄ λ¬¶μ—¬μ§€λ” κ²ƒμ„ μλ―Έν•λ‹¤. λ³΄ν†µ μΌλ°μ μΈ μ „μ—­λ³€μλ‚ κ°’μ΄ λ°”λ€μ§€ μ•μ„ κ°μΆ… κ°’λ“¤μ΄ μ •μ  λ°”μΈλ”©λλ‹¤.

```c++
void MovePlayer(Player* player)
{
    player->Move();
}

int main()
{
    Knight k;
    MovePlayer(&k);
}
```

λ‹¤μκ³Ό κ°™μ€ λ¶€λ¨ ν΄λμ¤μ ν¬μΈν„°λ¥Ό λ°›λ” μ „μ—­ ν•¨μκ°€ μλ‹¤κ³  κ°€μ •ν•΄λ³΄μ. κ·Έλ° λ‹¤μ λ©”μΈ ν•¨μμ—μ„ ``` Knight ``` ν΄λμ¤λ¥Ό μƒμ„± ν›„ μ£Όμ†κ°’μ„ λ„κ²¨μ£Όλ©΄ μ—λ¬μ—†μ΄ μ μ‹¤ν–‰λλ” κ²ƒμ„ μ• μ μλ‹¤.

ν•μ§€λ§ ν•¨μμ—μ„ λ°›λ” μΈμκ°’μ΄ ν”λ μ΄μ–΄μ ν¬μΈν„°μ΄λ―€λ΅ ν”λ μ΄μ–΄ ν΄λμ¤ λ‚΄μ ``` Move ``` ν•¨μκ°€ μ‹¤ν–‰λλ‹¤.

ν•΄λ‹Ή ν•¨μλ” μ»΄νμΌ μ‹ μ΄λ―Έ λ°›λ” κ°’, λ„κ²¨μ¤„ κ°’ λ“±μ΄ κ³ μ •λμ–΄λ²„λ ¤ λ‚΄κ°€ ν•¨μλ¥Ό νΈμ¶ν–μ„ λ• λ°›λ” μΈμμ κ°’μ΄ λ¬΄μ—‡μΈμ§€λ” μ•μ§€ λ»ν•κ³  κ·Έλƒ¥ μ „λ‹¬λ§ ν•  λΏμ΄κΈ° λ•λ¬Έμ΄λ‹¤.

***

#### π λ™μ  λ°”μΈλ”©
**λ™μ  λ°”μΈλ”©(Dynamic Binding)**μ€ **μ‹¤ν–‰ μ‹μ μ— κ²°μ •**λμ–΄ κ°’μ΄ λ¬¶μ—¬μ§€λ” κ²ƒμ„ μλ―Έν•λ‹¤. μ„μ²λΌ μΌλ° ν•¨μλ¥Ό λ¶€λ¨ ν΄λμ¤ νƒ€μ…μΌλ΅ λ„“κ² μ΅μ•„ μ‚¬μ©ν•λ©΄ μμ‹ ν΄λμ¤κΉμ§€ μ‚¬μ©ν•  μ μλ‹¤λ” μ¥μ μ΄ μμ§€λ§ μ •μ  λ°”μΈλ”©μΌλ΅ μΈν•΄ μ–΄λ–¤ ν΄λμ¤μΈμ§€κΉμ§€λ” μ•μ§€ λ»ν•λ‹¤. κ·Έλ¬ν• μ μ„ λ³΄μ™„ν•κΈ° μ„ν•΄ λ™μ  λ°”μΈλ”©μΌλ΅ λ³€κ²½ν•΄μ£Όμ–΄μ•Όν•λ‹¤.

λ™μ  λ°”μΈλ”©μ„ μ›ν•λ‹¤λ©΄ **κ°€μƒ ν•¨μ(Virtual Function)**μ„ μ‚¬μ©ν•΄μ•Όν•λ‹¤. ν•¨μ μ•μ— ``` virtual ``` μ„ λ¶™μ—¬μ£Όμ–΄ λ§λ“¤ μ μλ‹¤.

```c++
class Player
{
public:
    void Move() { cout << "Move Player !" << endl; }
    virtual void VMove() { cout << "VMove Player !" << endl; }
public:
    int _hp;
};

class Knight : public Player
{
public:
    void Move() { cout << "Move Knight !" << endl; }
    // κ°€μƒ ν•¨μλ” μ¬μ •μλ¥Ό ν•λ”λΌλ„ κ°€μƒ ν•¨μμ΄λ‹¤.
    virtual void VMove() { cout << "VMove Knight !" << endl; }
public:
    int _stamina;
};

void MovePlayer(Player* player)
{
    player->VMove();
}
```

λ¶€λ¨ μμ‹ ν΄λμ¤ κ°κ°μ— κ°€μƒ ν•¨μλ¥Ό μ •μ, μ¬μ •μ ν•΄μ¤€ λ‹¤μ μΌλ° μ „μ—­ ν•¨μ λ‚΄μ—μ„ μ‹¤ν–‰ν•  ν•¨μλ¥Ό κ°€μƒ ν•¨μλ΅ μ„¤μ •ν•κ³  λ‹¤μ‹ μ‹¤ν–‰μ‹ν‚¤λ©΄ μ΄λ²μ—” μμ‹ ν΄λμ¤μΈ ``` Knight ```μ κ°€μƒ ν•¨μ ``` VMove ```κ°€ μ‹¤ν–‰λλ‹¤. μ΄λ ‡κ² λλ©΄ κ°’μ„ μ μ—°ν•κ² λ„κΈ°κ³  μ²λ¦¬ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤.

***

### π± κ°€μƒ ν•¨μ
**κ°€μƒ ν•¨μ(Virtual Function)**λ” μ •μ, μ¬μ •μ λμ–΄μ§€λ” λ©¤λ²„ ν•¨μ μ¤‘ λ™μ μΌλ΅ λ°”μΈλ”©μ„ ν•΄μ£ΌκΈ° μ„ν•΄ μ‚¬μ©ν•λ” ν•¨μμ΄λ‹¤. μ„μ—μ„ λ³΄μ•λ κ²ƒμ²λΌ ``` virtual ``` λ¬Έλ²•μ„ μ‚¬μ©ν•΄ κ°€μƒ ν•¨μλ¥Ό μ •μν•  μ μλ‹¤.

> π’΅ **κ°€μƒ ν•¨μλ¥Ό μ–΄λ–»κ² νΈμ¶ν•λ” κ±ΈκΉ?**   
μΌλ° ν•¨μμ™€ λ‹¤λ¥Ό λ°”κ°€ μ—†λ”λ° μ–΄λ–»κ² κ°€μƒ ν•¨μμΈμ§€ μ•κ³  μ μ—°ν•κ² νΈμ¶ν•΄μ£Όλ” κ±ΈκΉ?   
λ©”λ¨λ¦¬λ¥Ό μ‚΄ν΄λ³΄λ©΄ **κ°€μƒ ν•¨μ ν…μ΄λΈ”(vftable)**μ„ μ‚¬μ©ν• κ²ƒμ„ μ• μ μλ‹¤. κ°€μƒ ν•¨μ ν…μ΄λΈ”μ€ κ°€μƒ ν•¨μμ μ£Όμ†κ°’μ„ λ‹΄μ•„λ†“μ€ ν…μ΄λΈ”μ΄λ‹¤. λ³΄ν†µ ν΄λμ¤μ κΈ°λ³Έ μƒμ„±μκ°€ μ‹¤ν–‰λκΈ° μ „ μƒμ„±λλ©° ν•΄λ‹Ή κ°’μ„ ν†µν•΄ κ°€μƒ ν•¨μ μ λ¬΄λ¥Ό μ•κ² λκ³  μ•μ•„μ„ νΈμ¶ν•΄μ£Όλ” κ²ƒμ΄λ‹¤.   
![Alt Text](/assets/images/posts_img/basics/cpp/oop/polymorphism/vftable.PNG)   
![Alt Text](/assets/images/posts_img/basics/cpp/oop/polymorphism/vftable2.PNG)   
ν•΄λ‹Ή μ£Όμ†κ°’μΌλ΅ κ°€λ©΄ κ°€μƒ ν•¨μ ν…μ΄λΈ”μ΄ ν•λ‚ μκ³  κ·Έ λ‹¤μ λ©”λ¨λ¦¬λ¶€ν„° μ„¤μ •ν• λ©¤λ²„ λ³€μμ κ°’μ΄ μ°¨λ΅€λ΅ λ“¤μ–΄κ°€λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

***

#### π μμ κ°€μƒ ν•¨μ
**μμ κ°€μƒ ν•¨μ**λ” κµ¬ν„μ€ μ—†κ³  **μΈν„°νμ΄μ¤**λ§ μ „λ‹¬ν•λ” μ©λ„λ΅ μ‚¬μ©ν•κ³  μ‹¶μ„ κ²½μ°μ— μ‚¬μ©ν•λ‹¤.

```c++
class Player
{
public:
    virtual void VAttack() = 0;
};
```

μ„ μ²λΌ ν•¨μ μ„ μ–Έλ¶€μ— ``` = 0; ```μ„ λ¶™μ—¬ λ§λ“¤ μ μλ‹¤.

μμ κ°€μƒ ν•¨μκ°€ 1κ° μ΄μƒ ν¬ν•¨λλ©΄ ν•΄λ‹Ή ν΄λμ¤λ” λ°”λ΅ **μ¶”μƒ ν΄λμ¤**λ΅ κ°„μ£Όν•κ² λκ³  **μ§μ ‘μ μΌλ΅ κ°μ²΄λ¥Ό λ§λ“¤ μ μ—†κ² λλ‹¤.** μ„μ²λΌ ν”λ μ΄μ–΄ ν΄λμ¤λ¥Ό λ§λ“¤μ—λ‹¤λ©΄ μ™Έλ¶€μ—μ„ ``` Player p; ```λ΅ μ„ μ–Έν•  μ μ—†λ‹¤λ” μλ―Έκ°€ λλ‹¤.

λν•, μ¶”μƒ ν΄λμ¤λ¥Ό μƒμ†λ°›μ€ μμ‹ ν΄λμ¤λ” λ°λ“μ‹ **μμ κ°€μƒ ν•¨μμ κµ¬ν„λ¶€λ¥Ό μ„¤μ •**ν•΄μ•Ό μ‚¬μ©ν•  μ μκ²λλ‹¤.

***

## π‘» κΈ€μ„ λ§μΉλ©°
μ΄λ² μ‹κ°„μ—λ” κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ νΉμ§• μ¤‘ λ‹¤ν•μ„±μ— λ€ν•΄ μ•μ•„λ³΄μ•λ‹¤. μ¤λ²„λ΅λ”©κ³Ό μ¤λ²„λΌμ΄λ”©μ μ°¨μ΄κΉμ§€λ” μ•μ•λ”λ° λ°”μΈλ”©, κ°€μƒ ν•¨μλ” μ²μ μ•κ²λμ—λ‹¤. μƒκ°λ³΄λ‹¤ ν”„λ΅κ·Έλλ° κ³Όμ •μ—μ„ λ§μ€ μ²λ¦¬ λ‹¨κ³„κ°€ μλ‹¤λ” κ±Έ μ•κ²λμ—κ³  κ²½μ°μ— λ”°λΌ μ μ ν• λ°©λ²•μ„ μ‚¬μ©ν•΄μ•Όκ² λ‹¤λ” κ²ƒμ„ λ°°μ°κ² λμ—λ‹¤. μ•„μ§κΉμ§€λ” κ°€μƒ ν•¨μμ μ‘μ©λ²•μ΄ μƒκ°μ΄ μ μ• λ‚μ§€λ§ μ—¬λ¬ μ‹¤μµμ„ ν†µν•΄ κΈλ°© μµν μ μμ„ κ²ƒ κ°™λ‹¤.

***

_[μ†μ¤μ½”λ“ λ³΄λ¬κ°€κΈ°](https://github.com/choi-dan-di/study_cpp/tree/main/oop/polymorphism)_

***

_μ¶μ²_   
_[μΈν”„λ° Rookiesλ‹ κ°•μ](https://inf.run/bje8)_   